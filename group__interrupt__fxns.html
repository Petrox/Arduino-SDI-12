<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDI-12 for Arduino: Interrupt Service Routine</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDI-12 for Arduino
   &#160;<span id="projectnumber">2.1.0</span>
   </div>
   <div id="projectbrief">An Arduino library for SDI-12 communication without requiring any additional hardware.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__interrupt__fxns.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Interrupt Service Routine</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for handling interrupts - responding to changes on the data line and converting them to characters in the Rx buffer.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for handling interrupts - responding to changes on the data line and converting them to characters in the Rx buffer. </p>
<dl class="section see"><dt>See also</dt><dd>For a detailed explanation of interrupts see <a class="el" href="interrupts_page.html">Overview of Interrupts</a> </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae92237f6179c437a32391dc3689506d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__fxns.html#gae92237f6179c437a32391dc3689506d5">SDI12::startChar</a> ()</td></tr>
<tr class="memdesc:gae92237f6179c437a32391dc3689506d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a blank slate for a new incoming character.  <a href="group__interrupt__fxns.html#gae92237f6179c437a32391dc3689506d5">More...</a><br /></td></tr>
<tr class="separator:gae92237f6179c437a32391dc3689506d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf28fbdc8916b675bdc016209aaf86d90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__fxns.html#gaf28fbdc8916b675bdc016209aaf86d90">SDI12::receiveISR</a> ()</td></tr>
<tr class="memdesc:gaf28fbdc8916b675bdc016209aaf86d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interrupt service routine (ISR) - the function responding to changes in rx line state.  <a href="group__interrupt__fxns.html#gaf28fbdc8916b675bdc016209aaf86d90">More...</a><br /></td></tr>
<tr class="separator:gaf28fbdc8916b675bdc016209aaf86d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8b5c579dc5b10b44ff4b24945ce54e91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__fxns.html#ga8b5c579dc5b10b44ff4b24945ce54e91">SDI12::charToBuffer</a> (uint8_t c)</td></tr>
<tr class="memdesc:ga8b5c579dc5b10b44ff4b24945ce54e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put a finished character into the <a class="el" href="class_s_d_i12.html" title="The main class for SDI 12 instances.">SDI12</a> buffer.  <a href="group__interrupt__fxns.html#ga8b5c579dc5b10b44ff4b24945ce54e91">More...</a><br /></td></tr>
<tr class="separator:ga8b5c579dc5b10b44ff4b24945ce54e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b47db3032cdca8ac1f74c93fdad3e9e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__interrupt__fxns.html#ga2b47db3032cdca8ac1f74c93fdad3e9e">SDI12::handleInterrupt</a> ()</td></tr>
<tr class="memdesc:ga2b47db3032cdca8ac1f74c93fdad3e9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Intermediary used by the ISR - passes off responsibility for the interrupt to the active object.  <a href="group__interrupt__fxns.html#ga2b47db3032cdca8ac1f74c93fdad3e9e">More...</a><br /></td></tr>
<tr class="separator:ga2b47db3032cdca8ac1f74c93fdad3e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8b5c579dc5b10b44ff4b24945ce54e91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8b5c579dc5b10b44ff4b24945ce54e91">&#9670;&nbsp;</a></span>charToBuffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDI12::charToBuffer </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="_s_d_i12_8h.html">src/SDI12.h</a>&gt;</code></p>

<p>Put a finished character into the <a class="el" href="class_s_d_i12.html" title="The main class for SDI 12 instances.">SDI12</a> buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td><b>uint8_t (char)</b> the character to add to the buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga2b47db3032cdca8ac1f74c93fdad3e9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b47db3032cdca8ac1f74c93fdad3e9e">&#9670;&nbsp;</a></span>handleInterrupt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDI12::handleInterrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="_s_d_i12_8h.html">src/SDI12.h</a>&gt;</code></p>

<p>Intermediary used by the ISR - passes off responsibility for the interrupt to the active object. </p>
<p>On espressif boards (ESP8266 and ESP32), the ISR must be stored in IRAM </p>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="j_external_pcint_library_8ino-example.html#a0">j_external_pcint_library.ino</a>.</dd>
</dl>

</div>
</div>
<a id="gaf28fbdc8916b675bdc016209aaf86d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf28fbdc8916b675bdc016209aaf86d90">&#9670;&nbsp;</a></span>receiveISR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDI12::receiveISR </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="_s_d_i12_8h.html">src/SDI12.h</a>&gt;</code></p>

<p>The interrupt service routine (ISR) - the function responding to changes in rx line state. </p>
<p>This function checks which direction the change of the interrupt was and then uses that to populate the bits of the character. Unlike SoftwareSerial which listens for a start bit and then halts all program and other ISR execution until the end of the character, this library grabs the time of the interrupt, does some quick math, and lets the processor move on. The logic of creating a character this way is harder for a person to follow, but it pays off because we're not tieing up the processor in an ISR that lasts for 8.33ms for each character. [10 bits @ 1200 bits/s] For a person, that 8.33ms is trivial, but for even a "slow" 8MHz processor, that's over 60,000 ticks sitting idle per character. </p>

</div>
</div>
<a id="gae92237f6179c437a32391dc3689506d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae92237f6179c437a32391dc3689506d5">&#9670;&nbsp;</a></span>startChar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SDI12::startChar </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><code>#include &lt;<a class="el" href="_s_d_i12_8h.html">src/SDI12.h</a>&gt;</code></p>

<p>Creates a blank slate for a new incoming character. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
